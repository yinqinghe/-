import scrapy
from scrapy import Request
from scrapy.selector import Selector
from ..items import BaiduPage
import re
import time
class BaidutiebaSpider(scrapy.Spider):
    name = 'baiduTieba'
    allowed_domains = ['tieba.baidu.com']
    start_urls = ['https://tieba.baidu.com/f?kw=%E5%AD%99%E5%85%81%E7%8F%A0&ie=utf-8&pn=12800']

    header={
        # 'cookie': 'BIDUPSID=8F10C06B4F3326FE2876D959A11FB138; PSTM=1602322183; __yjs_duid=1_905405d7cc47199ebc65346ca416028b1617943503562; BDUSS=F3MjA1cXdWR1BweVBTa0tsdDhEd0pUTzVoSDlTd1BvMnlTZllQflFWZ2RWb3RoRVFBQUFBJCQAAAAAAQAAAAEAAABsYCsey97J4cnPv87Jz7~OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB3JY2EdyWNhMW; BDUSS_BFESS=F3MjA1cXdWR1BweVBTa0tsdDhEd0pUTzVoSDlTd1BvMnlTZllQflFWZ2RWb3RoRVFBQUFBJCQAAAAAAQAAAAEAAABsYCsey97J4cnPv87Jz7~OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB3JY2EdyWNhMW; wise_device=0; st_key_id=17; H_WISE_SIDS=110085_127969_132549_176399_179346_184716_188743_189755_190616_191254_194085_194511_194519_194530_195343_196426_197241_197711_197958_199568_200993_201193_201541_201701_202651_203190_203309_203520_204254_204305_204536_204778_204864_204917_205217_205234_205548_205569_206008_206122_206144_206249_206516_206681_206767_206905_207021_207177_207265_207364_207389_207471_207498_207610_207626_207716_207863_208001_208045_208055_208114_208163_208165_208225_208267_208271_208309_208312_208363_208559_208599_208721_208770_208772_208776_209140_209148_209294; STOKEN=869ef4bbe00b9c6fe53fee1d95e24ef6c034a2bfe8b673a90e892a19a4106d0f; Hm_lvt_98b9d8c2fd6608d564bf2ac2ae642948=1649209292; USER_JUMP=-1; Hm_lvt_287705c8d9e2073d13275b18dbd746dc=1649209292; BDSFRCVID=G7-OJexroG0xFB3D_Hm8uRtLxzTnskcTDYrEOwXPsp3LGJLVguQPEG0PttE_sDu-ox3logKKymOTHukF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF=tRk8oCPbtDvDqTrP-trf5DCShUFsKq3dB2Q-XPoO3KJWsl_RQhn1LnI00lOrhnTnaj7W3Mbgy4op8P3y0bb2DUA1y4vpKbQILgTxoUJ2bp5rqpbGqtnWDPAebPRih4r9QgbtBhQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0MBCK0hD0wDjA5D6PO5pCX5-CsWIJT2hcHMPoosIJ9QxK5Qh4nLp6tQJ3rMgc-KfTRJfbUotoH-JCV5l-bbfAe5qOp55TIbp5TtUJMsJbyMpQTqt4bDUvyKMniMCj9-pna2hQrh459XP68bTkA5bjZKxtq3mkjbPbDfn028DKuDjtBDjvyDGRabK6aKC5bL6rJabC3HqOJXU6q2bDeQN3O0fDe3NO7_DJaLtbdJ-c2hRbO-p0vWq54WbbvLT7johRTWqR4eP5h0MonDh835-odbM3tHCOOobRO5hvvJJ6O3M7hMUKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQXH_EJ6-8tR-eoDvt-5rDHJTg5DTjhPrMQNtLWMT-MTryKKJy3q_5sM7Shj7h0R0T2h6n2JJWKanRh4oNB-3iV-OxDUvnyxAZbpoIQUQxtNRJLp57-hbhKJ79DPvobUPU2fc9LUvt22cdot5yBbc8eIna5hjkbfJBQttjQn3hfIkj2CKLtC0BhDPRD6RDKICV-frb-C62aKDsKK0EBhcqJ-ovQT3WQxjyQbn726vtLjnrXPcmatOOHUbeWJ5pXn-R0hbjJM7xWeJp0-5lLp5nhMJm5MorKU00qfnOJ-7y523iXR6vQpnhjpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xXj_0-nDSHH8jtj_e3s; BDSFRCVID_BFESS=G7-OJexroG0xFB3D_Hm8uRtLxzTnskcTDYrEOwXPsp3LGJLVguQPEG0PttE_sDu-ox3logKKymOTHukF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF_BFESS=tRk8oCPbtDvDqTrP-trf5DCShUFsKq3dB2Q-XPoO3KJWsl_RQhn1LnI00lOrhnTnaj7W3Mbgy4op8P3y0bb2DUA1y4vpKbQILgTxoUJ2bp5rqpbGqtnWDPAebPRih4r9QgbtBhQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0MBCK0hD0wDjA5D6PO5pCX5-CsWIJT2hcHMPoosIJ9QxK5Qh4nLp6tQJ3rMgc-KfTRJfbUotoH-JCV5l-bbfAe5qOp55TIbp5TtUJMsJbyMpQTqt4bDUvyKMniMCj9-pna2hQrh459XP68bTkA5bjZKxtq3mkjbPbDfn028DKuDjtBDjvyDGRabK6aKC5bL6rJabC3HqOJXU6q2bDeQN3O0fDe3NO7_DJaLtbdJ-c2hRbO-p0vWq54WbbvLT7johRTWqR4eP5h0MonDh835-odbM3tHCOOobRO5hvvJJ6O3M7hMUKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQXH_EJ6-8tR-eoDvt-5rDHJTg5DTjhPrMQNtLWMT-MTryKKJy3q_5sM7Shj7h0R0T2h6n2JJWKanRh4oNB-3iV-OxDUvnyxAZbpoIQUQxtNRJLp57-hbhKJ79DPvobUPU2fc9LUvt22cdot5yBbc8eIna5hjkbfJBQttjQn3hfIkj2CKLtC0BhDPRD6RDKICV-frb-C62aKDsKK0EBhcqJ-ovQT3WQxjyQbn726vtLjnrXPcmatOOHUbeWJ5pXn-R0hbjJM7xWeJp0-5lLp5nhMJm5MorKU00qfnOJ-7y523iXR6vQpnhjpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xXj_0-nDSHH8jtj_e3s; delPer=0; PSINO=1; BDRCVFR[n9IS1zhFc9f]=mk3SLVN4HKm; BDORZ=FFFB88E999055A3F8A630C64834BD6D0; ZD_ENTRY=google; BAIDUID=D84211676C899F732CD158D80EA5DA46:FG=1; H_PS_PSSID=31253_26350; BAIDUID_BFESS=7EC2BF8BBEE5880096BD3BF9D8B84841:FG=1; showCardBeforeSign=1; 4801126508_FRSVideoUploadTip=1; video_bubble4801126508=1; BAIDU_WISE_UID=wapp_1649985667109_710; Hm_lpvt_287705c8d9e2073d13275b18dbd746dc=1649986237; tb_as_data=c3544102dacb6c52f509a88745497e55ee3a14b0d70d60c656ef845e849c5b13d8232655d1fa694c08d1d6ed9e2e63b0f52acb6b36face0161ba86daef9d310a419d4a1cf5af503ee32edad51df5d904f8c5e5ede4caca1706ae4972304fc24c; Hm_lpvt_98b9d8c2fd6608d564bf2ac2ae642948=1649993374; ab_sr=1.0.1_MTJhMjVjOGQ5NzU0YTgxZDI1NjE1NmNkNmE2NDE2NTdkMTRkNTQ0MDI3MjQxMmJhM2ZlMWFmMTA2YTQ4YzBkMWJlNWRiMTBiODBkNjdiNWM3NjUxODk0OGI1NDhlYzlmOTk1NTU2YjM1YWU2M2MzMjg2NzNkZDhiZDAzODMyZDk3MmRmNTc4NTc2OWVkNjNmMDhkOWM4YTFjMDYyNDMwMDgxZjgxYjcxMmM5NGM2ZjIxYWJkMTRlZGYzZmIxNDE1; st_data=75db67bd8ea82d14e82b62f967ec927c818dcc4aa6fa776eec207f059c97524323cf65d133e99a0ed9a4bc8f8e78932673ea11c4ddf97d0fa35358a33bec199a31fe4f4edbff8a1737379a0a772c6856894723eb70167160598765e38c9ee033; st_sign=b47b36dd',
        # 'cookie':'BIDUPSID=8F10C06B4F3326FE2876D959A11FB138; PSTM=1602322183; __yjs_duid=1_905405d7cc47199ebc65346ca416028b1617943503562; BDUSS=F3MjA1cXdWR1BweVBTa0tsdDhEd0pUTzVoSDlTd1BvMnlTZllQflFWZ2RWb3RoRVFBQUFBJCQAAAAAAQAAAAEAAABsYCsey97J4cnPv87Jz7~OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB3JY2EdyWNhMW; BDUSS_BFESS=F3MjA1cXdWR1BweVBTa0tsdDhEd0pUTzVoSDlTd1BvMnlTZllQflFWZ2RWb3RoRVFBQUFBJCQAAAAAAQAAAAEAAABsYCsey97J4cnPv87Jz7~OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB3JY2EdyWNhMW; wise_device=0; st_key_id=17; H_WISE_SIDS=110085_127969_132549_176399_179346_184716_188743_189755_190616_191254_194085_194511_194519_194530_195343_196426_197241_197711_197958_199568_200993_201193_201541_201701_202651_203190_203309_203520_204254_204305_204536_204778_204864_204917_205217_205234_205548_205569_206008_206122_206144_206249_206516_206681_206767_206905_207021_207177_207265_207364_207389_207471_207498_207610_207626_207716_207863_208001_208045_208055_208114_208163_208165_208225_208267_208271_208309_208312_208363_208559_208599_208721_208770_208772_208776_209140_209148_209294; STOKEN=869ef4bbe00b9c6fe53fee1d95e24ef6c034a2bfe8b673a90e892a19a4106d0f; Hm_lvt_98b9d8c2fd6608d564bf2ac2ae642948=1649209292; USER_JUMP=-1; Hm_lvt_287705c8d9e2073d13275b18dbd746dc=1649209292; BDSFRCVID=G7-OJexroG0xFB3D_Hm8uRtLxzTnskcTDYrEOwXPsp3LGJLVguQPEG0PttE_sDu-ox3logKKymOTHukF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF=tRk8oCPbtDvDqTrP-trf5DCShUFsKq3dB2Q-XPoO3KJWsl_RQhn1LnI00lOrhnTnaj7W3Mbgy4op8P3y0bb2DUA1y4vpKbQILgTxoUJ2bp5rqpbGqtnWDPAebPRih4r9QgbtBhQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0MBCK0hD0wDjA5D6PO5pCX5-CsWIJT2hcHMPoosIJ9QxK5Qh4nLp6tQJ3rMgc-KfTRJfbUotoH-JCV5l-bbfAe5qOp55TIbp5TtUJMsJbyMpQTqt4bDUvyKMniMCj9-pna2hQrh459XP68bTkA5bjZKxtq3mkjbPbDfn028DKuDjtBDjvyDGRabK6aKC5bL6rJabC3HqOJXU6q2bDeQN3O0fDe3NO7_DJaLtbdJ-c2hRbO-p0vWq54WbbvLT7johRTWqR4eP5h0MonDh835-odbM3tHCOOobRO5hvvJJ6O3M7hMUKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQXH_EJ6-8tR-eoDvt-5rDHJTg5DTjhPrMQNtLWMT-MTryKKJy3q_5sM7Shj7h0R0T2h6n2JJWKanRh4oNB-3iV-OxDUvnyxAZbpoIQUQxtNRJLp57-hbhKJ79DPvobUPU2fc9LUvt22cdot5yBbc8eIna5hjkbfJBQttjQn3hfIkj2CKLtC0BhDPRD6RDKICV-frb-C62aKDsKK0EBhcqJ-ovQT3WQxjyQbn726vtLjnrXPcmatOOHUbeWJ5pXn-R0hbjJM7xWeJp0-5lLp5nhMJm5MorKU00qfnOJ-7y523iXR6vQpnhjpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xXj_0-nDSHH8jtj_e3s; BDSFRCVID_BFESS=G7-OJexroG0xFB3D_Hm8uRtLxzTnskcTDYrEOwXPsp3LGJLVguQPEG0PttE_sDu-ox3logKKymOTHukF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF_BFESS=tRk8oCPbtDvDqTrP-trf5DCShUFsKq3dB2Q-XPoO3KJWsl_RQhn1LnI00lOrhnTnaj7W3Mbgy4op8P3y0bb2DUA1y4vpKbQILgTxoUJ2bp5rqpbGqtnWDPAebPRih4r9QgbtBhQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0MBCK0hD0wDjA5D6PO5pCX5-CsWIJT2hcHMPoosIJ9QxK5Qh4nLp6tQJ3rMgc-KfTRJfbUotoH-JCV5l-bbfAe5qOp55TIbp5TtUJMsJbyMpQTqt4bDUvyKMniMCj9-pna2hQrh459XP68bTkA5bjZKxtq3mkjbPbDfn028DKuDjtBDjvyDGRabK6aKC5bL6rJabC3HqOJXU6q2bDeQN3O0fDe3NO7_DJaLtbdJ-c2hRbO-p0vWq54WbbvLT7johRTWqR4eP5h0MonDh835-odbM3tHCOOobRO5hvvJJ6O3M7hMUKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQXH_EJ6-8tR-eoDvt-5rDHJTg5DTjhPrMQNtLWMT-MTryKKJy3q_5sM7Shj7h0R0T2h6n2JJWKanRh4oNB-3iV-OxDUvnyxAZbpoIQUQxtNRJLp57-hbhKJ79DPvobUPU2fc9LUvt22cdot5yBbc8eIna5hjkbfJBQttjQn3hfIkj2CKLtC0BhDPRD6RDKICV-frb-C62aKDsKK0EBhcqJ-ovQT3WQxjyQbn726vtLjnrXPcmatOOHUbeWJ5pXn-R0hbjJM7xWeJp0-5lLp5nhMJm5MorKU00qfnOJ-7y523iXR6vQpnhjpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xXj_0-nDSHH8jtj_e3s; delPer=0; PSINO=1; BDRCVFR[n9IS1zhFc9f]=mk3SLVN4HKm; BDORZ=FFFB88E999055A3F8A630C64834BD6D0; ZD_ENTRY=google; BAIDUID=D84211676C899F732CD158D80EA5DA46:FG=1; H_PS_PSSID=31253_26350; BAIDUID_BFESS=7EC2BF8BBEE5880096BD3BF9D8B84841:FG=1; showCardBeforeSign=1; 4801126508_FRSVideoUploadTip=1; video_bubble4801126508=1; BAIDU_WISE_UID=wapp_1649985667109_710; Hm_lpvt_287705c8d9e2073d13275b18dbd746dc=1649986237; tb_as_data=c3544102dacb6c52f509a88745497e55ee3a14b0d70d60c656ef845e849c5b13d8232655d1fa694c08d1d6ed9e2e63b0d9c5caa913b8c3440acc81ebd38b085f35d18464e16cb2c3d1c233e9534897df063d692c18fcb55a8a752c47e26cbcb2; Hm_lpvt_98b9d8c2fd6608d564bf2ac2ae642948=1649997137; ab_sr=1.0.1_YmNiZjA2YmZiZmExYzBmZmFlNzg4MDU1NGUwYzdjZmI4MDkxMjk4YzcxNzI0NTg2NTFiM2NjMzNjMjJhMzYwZjA2NDAzMjMwZjllM2FkMGMzYzk0NTE0NTg3YjNlNmQ0N2Y4MzFkYWI2MWQ4ZWU0MGEwM2I2NGZmNzk0YWVmYjhiMTA4OTMwY2U4ZjY3ZmUyNGJiNDM3ZWVlYzkzOGYzZGM3N2U1NGZmN2ZjY2IyMDA5NzM5MTg3ZmFjNzU3YjFm; st_data=75db67bd8ea82d14e82b62f967ec927c818dcc4aa6fa776eec207f059c97524323cf65d133e99a0ed9a4bc8f8e78932673ea11c4ddf97d0fa35358a33bec199ab52cb122d219d6cda78c9a77c8d8e9edd5597f1112ae540f6b50b4e59a6eb621; st_sign=c7363493',
        # 'cookie':'BIDUPSID=8F10C06B4F3326FE2876D959A11FB138; PSTM=1602322183; __yjs_duid=1_905405d7cc47199ebc65346ca416028b1617943503562; BDUSS=F3MjA1cXdWR1BweVBTa0tsdDhEd0pUTzVoSDlTd1BvMnlTZllQflFWZ2RWb3RoRVFBQUFBJCQAAAAAAQAAAAEAAABsYCsey97J4cnPv87Jz7~OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB3JY2EdyWNhMW; BDUSS_BFESS=F3MjA1cXdWR1BweVBTa0tsdDhEd0pUTzVoSDlTd1BvMnlTZllQflFWZ2RWb3RoRVFBQUFBJCQAAAAAAQAAAAEAAABsYCsey97J4cnPv87Jz7~OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB3JY2EdyWNhMW; wise_device=0; st_key_id=17; H_WISE_SIDS=110085_127969_132549_176399_179346_184716_188743_189755_190616_191254_194085_194511_194519_194530_195343_196426_197241_197711_197958_199568_200993_201193_201541_201701_202651_203190_203309_203520_204254_204305_204536_204778_204864_204917_205217_205234_205548_205569_206008_206122_206144_206249_206516_206681_206767_206905_207021_207177_207265_207364_207389_207471_207498_207610_207626_207716_207863_208001_208045_208055_208114_208163_208165_208225_208267_208271_208309_208312_208363_208559_208599_208721_208770_208772_208776_209140_209148_209294; STOKEN=869ef4bbe00b9c6fe53fee1d95e24ef6c034a2bfe8b673a90e892a19a4106d0f; Hm_lvt_98b9d8c2fd6608d564bf2ac2ae642948=1649209292; USER_JUMP=-1; Hm_lvt_287705c8d9e2073d13275b18dbd746dc=1649209292; BDSFRCVID=G7-OJexroG0xFB3D_Hm8uRtLxzTnskcTDYrEOwXPsp3LGJLVguQPEG0PttE_sDu-ox3logKKymOTHukF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF=tRk8oCPbtDvDqTrP-trf5DCShUFsKq3dB2Q-XPoO3KJWsl_RQhn1LnI00lOrhnTnaj7W3Mbgy4op8P3y0bb2DUA1y4vpKbQILgTxoUJ2bp5rqpbGqtnWDPAebPRih4r9QgbtBhQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0MBCK0hD0wDjA5D6PO5pCX5-CsWIJT2hcHMPoosIJ9QxK5Qh4nLp6tQJ3rMgc-KfTRJfbUotoH-JCV5l-bbfAe5qOp55TIbp5TtUJMsJbyMpQTqt4bDUvyKMniMCj9-pna2hQrh459XP68bTkA5bjZKxtq3mkjbPbDfn028DKuDjtBDjvyDGRabK6aKC5bL6rJabC3HqOJXU6q2bDeQN3O0fDe3NO7_DJaLtbdJ-c2hRbO-p0vWq54WbbvLT7johRTWqR4eP5h0MonDh835-odbM3tHCOOobRO5hvvJJ6O3M7hMUKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQXH_EJ6-8tR-eoDvt-5rDHJTg5DTjhPrMQNtLWMT-MTryKKJy3q_5sM7Shj7h0R0T2h6n2JJWKanRh4oNB-3iV-OxDUvnyxAZbpoIQUQxtNRJLp57-hbhKJ79DPvobUPU2fc9LUvt22cdot5yBbc8eIna5hjkbfJBQttjQn3hfIkj2CKLtC0BhDPRD6RDKICV-frb-C62aKDsKK0EBhcqJ-ovQT3WQxjyQbn726vtLjnrXPcmatOOHUbeWJ5pXn-R0hbjJM7xWeJp0-5lLp5nhMJm5MorKU00qfnOJ-7y523iXR6vQpnhjpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xXj_0-nDSHH8jtj_e3s; BDSFRCVID_BFESS=G7-OJexroG0xFB3D_Hm8uRtLxzTnskcTDYrEOwXPsp3LGJLVguQPEG0PttE_sDu-ox3logKKymOTHukF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF_BFESS=tRk8oCPbtDvDqTrP-trf5DCShUFsKq3dB2Q-XPoO3KJWsl_RQhn1LnI00lOrhnTnaj7W3Mbgy4op8P3y0bb2DUA1y4vpKbQILgTxoUJ2bp5rqpbGqtnWDPAebPRih4r9QgbtBhQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0MBCK0hD0wDjA5D6PO5pCX5-CsWIJT2hcHMPoosIJ9QxK5Qh4nLp6tQJ3rMgc-KfTRJfbUotoH-JCV5l-bbfAe5qOp55TIbp5TtUJMsJbyMpQTqt4bDUvyKMniMCj9-pna2hQrh459XP68bTkA5bjZKxtq3mkjbPbDfn028DKuDjtBDjvyDGRabK6aKC5bL6rJabC3HqOJXU6q2bDeQN3O0fDe3NO7_DJaLtbdJ-c2hRbO-p0vWq54WbbvLT7johRTWqR4eP5h0MonDh835-odbM3tHCOOobRO5hvvJJ6O3M7hMUKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQXH_EJ6-8tR-eoDvt-5rDHJTg5DTjhPrMQNtLWMT-MTryKKJy3q_5sM7Shj7h0R0T2h6n2JJWKanRh4oNB-3iV-OxDUvnyxAZbpoIQUQxtNRJLp57-hbhKJ79DPvobUPU2fc9LUvt22cdot5yBbc8eIna5hjkbfJBQttjQn3hfIkj2CKLtC0BhDPRD6RDKICV-frb-C62aKDsKK0EBhcqJ-ovQT3WQxjyQbn726vtLjnrXPcmatOOHUbeWJ5pXn-R0hbjJM7xWeJp0-5lLp5nhMJm5MorKU00qfnOJ-7y523iXR6vQpnhjpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xXj_0-nDSHH8jtj_e3s; BDORZ=FFFB88E999055A3F8A630C64834BD6D0; BAIDUID=D84211676C899F732CD158D80EA5DA46:FG=1; H_PS_PSSID=31253_26350; showCardBeforeSign=1; 4801126508_FRSVideoUploadTip=1; video_bubble4801126508=1; delPer=0; PSINO=1; BAIDUID_BFESS=85FF07342EE8F5F981377AD5D1BA61EE:FG=1; Hm_lpvt_287705c8d9e2073d13275b18dbd746dc=1650009060; tb_as_data=c3544102dacb6c52f509a88745497e55ee3a14b0d70d60c656ef845e849c5b13d8232655d1fa694c08d1d6ed9e2e63b0a0ddf9786626f71fa13cdd7f93dca4a5de796737e55788f34d2723cbbfc985c13b9ff6c8d6c5bd9ef3f52fb49d1f80cd9a8c90000bf84e9cc856b8e5b903848f; Hm_lpvt_98b9d8c2fd6608d564bf2ac2ae642948=1650009130; ab_sr=1.0.1_NWQ4MjdjNTFhMDdhNDcwZTY0ZGEwZjljMGQ5YTE4ZTI5OTg1Y2I0YWU2OTBhMjBlMWEyYmI0ZjQ3MGZiODEwMDY1NjM1MGY3Y2QxOTZkMWM4Y2JmNTFmYjhkMDNlNGRkNDc4MmJjODAwMmM5Nzg0MWM1YTUzMTBhZWUwODY4MWM5NjBiOGNhZjcyN2ZjZWZjNzVlNjIxMzAwY2ZhZDRjNTc0MWM4Nzk3Y2E3OWQ0Mzg3Njc3ODMwYTg3NWNmOWJm; st_data=75db67bd8ea82d14e82b62f967ec927c818dcc4aa6fa776eec207f059c97524323cf65d133e99a0ed9a4bc8f8e78932673ea11c4ddf97d0fa35358a33bec199ad80167bf1b71cbeb9a6050aba5b1b684e5541ddff440f62e605f7e4614e48694; st_sign=8038b9eb',
        'cookie':'BIDUPSID=8F10C06B4F3326FE2876D959A11FB138; PSTM=1602322183; __yjs_duid=1_905405d7cc47199ebc65346ca416028b1617943503562; BDUSS=F3MjA1cXdWR1BweVBTa0tsdDhEd0pUTzVoSDlTd1BvMnlTZllQflFWZ2RWb3RoRVFBQUFBJCQAAAAAAQAAAAEAAABsYCsey97J4cnPv87Jz7~OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB3JY2EdyWNhMW; BDUSS_BFESS=F3MjA1cXdWR1BweVBTa0tsdDhEd0pUTzVoSDlTd1BvMnlTZllQflFWZ2RWb3RoRVFBQUFBJCQAAAAAAQAAAAEAAABsYCsey97J4cnPv87Jz7~OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB3JY2EdyWNhMW; wise_device=0; st_key_id=17; H_WISE_SIDS=110085_127969_132549_176399_179346_184716_188743_189755_190616_191254_194085_194511_194519_194530_195343_196426_197241_197711_197958_199568_200993_201193_201541_201701_202651_203190_203309_203520_204254_204305_204536_204778_204864_204917_205217_205234_205548_205569_206008_206122_206144_206249_206516_206681_206767_206905_207021_207177_207265_207364_207389_207471_207498_207610_207626_207716_207863_208001_208045_208055_208114_208163_208165_208225_208267_208271_208309_208312_208363_208559_208599_208721_208770_208772_208776_209140_209148_209294; STOKEN=869ef4bbe00b9c6fe53fee1d95e24ef6c034a2bfe8b673a90e892a19a4106d0f; Hm_lvt_98b9d8c2fd6608d564bf2ac2ae642948=1649209292; USER_JUMP=-1; Hm_lvt_287705c8d9e2073d13275b18dbd746dc=1649209292; BDSFRCVID=G7-OJexroG0xFB3D_Hm8uRtLxzTnskcTDYrEOwXPsp3LGJLVguQPEG0PttE_sDu-ox3logKKymOTHukF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF=tRk8oCPbtDvDqTrP-trf5DCShUFsKq3dB2Q-XPoO3KJWsl_RQhn1LnI00lOrhnTnaj7W3Mbgy4op8P3y0bb2DUA1y4vpKbQILgTxoUJ2bp5rqpbGqtnWDPAebPRih4r9QgbtBhQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0MBCK0hD0wDjA5D6PO5pCX5-CsWIJT2hcHMPoosIJ9QxK5Qh4nLp6tQJ3rMgc-KfTRJfbUotoH-JCV5l-bbfAe5qOp55TIbp5TtUJMsJbyMpQTqt4bDUvyKMniMCj9-pna2hQrh459XP68bTkA5bjZKxtq3mkjbPbDfn028DKuDjtBDjvyDGRabK6aKC5bL6rJabC3HqOJXU6q2bDeQN3O0fDe3NO7_DJaLtbdJ-c2hRbO-p0vWq54WbbvLT7johRTWqR4eP5h0MonDh835-odbM3tHCOOobRO5hvvJJ6O3M7hMUKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQXH_EJ6-8tR-eoDvt-5rDHJTg5DTjhPrMQNtLWMT-MTryKKJy3q_5sM7Shj7h0R0T2h6n2JJWKanRh4oNB-3iV-OxDUvnyxAZbpoIQUQxtNRJLp57-hbhKJ79DPvobUPU2fc9LUvt22cdot5yBbc8eIna5hjkbfJBQttjQn3hfIkj2CKLtC0BhDPRD6RDKICV-frb-C62aKDsKK0EBhcqJ-ovQT3WQxjyQbn726vtLjnrXPcmatOOHUbeWJ5pXn-R0hbjJM7xWeJp0-5lLp5nhMJm5MorKU00qfnOJ-7y523iXR6vQpnhjpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xXj_0-nDSHH8jtj_e3s; BDSFRCVID_BFESS=G7-OJexroG0xFB3D_Hm8uRtLxzTnskcTDYrEOwXPsp3LGJLVguQPEG0PttE_sDu-ox3logKKymOTHukF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF_BFESS=tRk8oCPbtDvDqTrP-trf5DCShUFsKq3dB2Q-XPoO3KJWsl_RQhn1LnI00lOrhnTnaj7W3Mbgy4op8P3y0bb2DUA1y4vpKbQILgTxoUJ2bp5rqpbGqtnWDPAebPRih4r9QgbtBhQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0MBCK0hD0wDjA5D6PO5pCX5-CsWIJT2hcHMPoosIJ9QxK5Qh4nLp6tQJ3rMgc-KfTRJfbUotoH-JCV5l-bbfAe5qOp55TIbp5TtUJMsJbyMpQTqt4bDUvyKMniMCj9-pna2hQrh459XP68bTkA5bjZKxtq3mkjbPbDfn028DKuDjtBDjvyDGRabK6aKC5bL6rJabC3HqOJXU6q2bDeQN3O0fDe3NO7_DJaLtbdJ-c2hRbO-p0vWq54WbbvLT7johRTWqR4eP5h0MonDh835-odbM3tHCOOobRO5hvvJJ6O3M7hMUKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQXH_EJ6-8tR-eoDvt-5rDHJTg5DTjhPrMQNtLWMT-MTryKKJy3q_5sM7Shj7h0R0T2h6n2JJWKanRh4oNB-3iV-OxDUvnyxAZbpoIQUQxtNRJLp57-hbhKJ79DPvobUPU2fc9LUvt22cdot5yBbc8eIna5hjkbfJBQttjQn3hfIkj2CKLtC0BhDPRD6RDKICV-frb-C62aKDsKK0EBhcqJ-ovQT3WQxjyQbn726vtLjnrXPcmatOOHUbeWJ5pXn-R0hbjJM7xWeJp0-5lLp5nhMJm5MorKU00qfnOJ-7y523iXR6vQpnhjpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xXj_0-nDSHH8jtj_e3s; BAIDUID=D84211676C899F732CD158D80EA5DA46:FG=1; 4801126508_FRSVideoUploadTip=1; video_bubble4801126508=1; H_PS_PSSID=31253_26350; BDORZ=FFFB88E999055A3F8A630C64834BD6D0; BA_HECTOR=002l2g2kal2400ag8a1h62iki0r; delPer=0; PSINO=1; Hmery-Time=2724524517; BAIDUID_BFESS=CDBB9F674E8BFCC5021E6B6641862BC6:FG=1; BAIDU_WISE_UID=wapp_1650599767848_756; Hm_lpvt_287705c8d9e2073d13275b18dbd746dc=1650605815; tb_as_data=c3544102dacb6c52f509a88745497e55ee3a14b0d70d60c656ef845e849c5b13d8232655d1fa694c08d1d6ed9e2e63b0a21dd70746d2493ae0583af09c3c035d81d491319ba29a6acb3121dcfd19d85c0a7d26d67b234773ded3030c8926213c; Hm_lpvt_98b9d8c2fd6608d564bf2ac2ae642948=1650606042; ab_sr=1.0.1_ZDJjZjU2ODQ5MDBjZDI4Mjg2Y2E1MGUwODMxYzQ2ZjYzYWM0OTQxNzkyNGIwZWQ1MWIxMGY5YWJjM2UzM2FhZmZkOWUxYjg1MDY1MDY4Zjk5YWE2MWEyNDU3OTNkOGViNmVlMzJhZWJhOThmZDJmOGQzOGJjNzY2YThiN2ZhZDRhOWRlYzBlYTk5MzEzMzgwZGMzNDY0MjdhNmVjNTgxMjUzOWM4NDExN2UwZWIwNDYzMzM4M2U5OWI2YTUxNjMw; st_data=201b39c5ad071d09e8f18c2fcd05e35ffb824e4567b502d2e077729975b507a92ad0a1bb6bbd92435c5c93f4b49573b507d9d0c12a945b317f2749a206bd5bf71bf2bd81d3ad37cf427daf28b33e325fb95add77bedcb5d1761a12b1c3276563; st_sign=c149b7ae',
        # 'cookie':'BIDUPSID=8F10C06B4F3326FE2876D959A11FB138; PSTM=1602322183; __yjs_duid=1_905405d7cc47199ebc65346ca416028b1617943503562; BDUSS=F3MjA1cXdWR1BweVBTa0tsdDhEd0pUTzVoSDlTd1BvMnlTZllQflFWZ2RWb3RoRVFBQUFBJCQAAAAAAQAAAAEAAABsYCsey97J4cnPv87Jz7~OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB3JY2EdyWNhMW; BDUSS_BFESS=F3MjA1cXdWR1BweVBTa0tsdDhEd0pUTzVoSDlTd1BvMnlTZllQflFWZ2RWb3RoRVFBQUFBJCQAAAAAAQAAAAEAAABsYCsey97J4cnPv87Jz7~OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB3JY2EdyWNhMW; wise_device=0; st_key_id=17; H_WISE_SIDS=110085_127969_132549_176399_179346_184716_188743_189755_190616_191254_194085_194511_194519_194530_195343_196426_197241_197711_197958_199568_200993_201193_201541_201701_202651_203190_203309_203520_204254_204305_204536_204778_204864_204917_205217_205234_205548_205569_206008_206122_206144_206249_206516_206681_206767_206905_207021_207177_207265_207364_207389_207471_207498_207610_207626_207716_207863_208001_208045_208055_208114_208163_208165_208225_208267_208271_208309_208312_208363_208559_208599_208721_208770_208772_208776_209140_209148_209294; STOKEN=869ef4bbe00b9c6fe53fee1d95e24ef6c034a2bfe8b673a90e892a19a4106d0f; Hm_lvt_98b9d8c2fd6608d564bf2ac2ae642948=1649209292; USER_JUMP=-1; Hm_lvt_287705c8d9e2073d13275b18dbd746dc=1649209292; BDSFRCVID=G7-OJexroG0xFB3D_Hm8uRtLxzTnskcTDYrEOwXPsp3LGJLVguQPEG0PttE_sDu-ox3logKKymOTHukF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF=tRk8oCPbtDvDqTrP-trf5DCShUFsKq3dB2Q-XPoO3KJWsl_RQhn1LnI00lOrhnTnaj7W3Mbgy4op8P3y0bb2DUA1y4vpKbQILgTxoUJ2bp5rqpbGqtnWDPAebPRih4r9QgbtBhQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0MBCK0hD0wDjA5D6PO5pCX5-CsWIJT2hcHMPoosIJ9QxK5Qh4nLp6tQJ3rMgc-KfTRJfbUotoH-JCV5l-bbfAe5qOp55TIbp5TtUJMsJbyMpQTqt4bDUvyKMniMCj9-pna2hQrh459XP68bTkA5bjZKxtq3mkjbPbDfn028DKuDjtBDjvyDGRabK6aKC5bL6rJabC3HqOJXU6q2bDeQN3O0fDe3NO7_DJaLtbdJ-c2hRbO-p0vWq54WbbvLT7johRTWqR4eP5h0MonDh835-odbM3tHCOOobRO5hvvJJ6O3M7hMUKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQXH_EJ6-8tR-eoDvt-5rDHJTg5DTjhPrMQNtLWMT-MTryKKJy3q_5sM7Shj7h0R0T2h6n2JJWKanRh4oNB-3iV-OxDUvnyxAZbpoIQUQxtNRJLp57-hbhKJ79DPvobUPU2fc9LUvt22cdot5yBbc8eIna5hjkbfJBQttjQn3hfIkj2CKLtC0BhDPRD6RDKICV-frb-C62aKDsKK0EBhcqJ-ovQT3WQxjyQbn726vtLjnrXPcmatOOHUbeWJ5pXn-R0hbjJM7xWeJp0-5lLp5nhMJm5MorKU00qfnOJ-7y523iXR6vQpnhjpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xXj_0-nDSHH8jtj_e3s; BDSFRCVID_BFESS=G7-OJexroG0xFB3D_Hm8uRtLxzTnskcTDYrEOwXPsp3LGJLVguQPEG0PttE_sDu-ox3logKKymOTHukF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF_BFESS=tRk8oCPbtDvDqTrP-trf5DCShUFsKq3dB2Q-XPoO3KJWsl_RQhn1LnI00lOrhnTnaj7W3Mbgy4op8P3y0bb2DUA1y4vpKbQILgTxoUJ2bp5rqpbGqtnWDPAebPRih4r9QgbtBhQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0MBCK0hD0wDjA5D6PO5pCX5-CsWIJT2hcHMPoosIJ9QxK5Qh4nLp6tQJ3rMgc-KfTRJfbUotoH-JCV5l-bbfAe5qOp55TIbp5TtUJMsJbyMpQTqt4bDUvyKMniMCj9-pna2hQrh459XP68bTkA5bjZKxtq3mkjbPbDfn028DKuDjtBDjvyDGRabK6aKC5bL6rJabC3HqOJXU6q2bDeQN3O0fDe3NO7_DJaLtbdJ-c2hRbO-p0vWq54WbbvLT7johRTWqR4eP5h0MonDh835-odbM3tHCOOobRO5hvvJJ6O3M7hMUKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQXH_EJ6-8tR-eoDvt-5rDHJTg5DTjhPrMQNtLWMT-MTryKKJy3q_5sM7Shj7h0R0T2h6n2JJWKanRh4oNB-3iV-OxDUvnyxAZbpoIQUQxtNRJLp57-hbhKJ79DPvobUPU2fc9LUvt22cdot5yBbc8eIna5hjkbfJBQttjQn3hfIkj2CKLtC0BhDPRD6RDKICV-frb-C62aKDsKK0EBhcqJ-ovQT3WQxjyQbn726vtLjnrXPcmatOOHUbeWJ5pXn-R0hbjJM7xWeJp0-5lLp5nhMJm5MorKU00qfnOJ-7y523iXR6vQpnhjpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xXj_0-nDSHH8jtj_e3s; BDORZ=FFFB88E999055A3F8A630C64834BD6D0; BAIDUID=D84211676C899F732CD158D80EA5DA46:FG=1; H_PS_PSSID=31253_26350; showCardBeforeSign=1; 4801126508_FRSVideoUploadTip=1; video_bubble4801126508=1; delPer=0; PSINO=1; BAIDUID_BFESS=85FF07342EE8F5F981377AD5D1BA61EE:FG=1; BAIDU_WISE_UID=wapp_1650010933966_987; Hm_lpvt_287705c8d9e2073d13275b18dbd746dc=1650028635; tb_as_data=c3544102dacb6c52f509a88745497e55ee3a14b0d70d60c656ef845e849c5b13d8232655d1fa694c08d1d6ed9e2e63b0a0c20c426305629aa5135f649312f36ead90022a552875fff1d680f15bf0644633ca45a714e6a29d7c38520d807c4a63; Hm_lpvt_98b9d8c2fd6608d564bf2ac2ae642948=1650070954; ab_sr=1.0.1_MjZiMDIyN2NlNWVjYmU3ZGQzZjFkMjg2MjJiNzc1ZjJlNjlmNWQwZDlhMGZkMWJhMDY5NmVmM2E4MjExMWYyY2JiZTIzMjY0MDU2MDAxNGUxYjI1NmNlNzAxOTQ5MTkwYTdkM2ZkNTI0NTQ1Y2Q4ZDkyZGFmYmY1YjU5NzczYWU0YWI4ZDY0ZDQwYjY0NDE5YmU3ODdmNmU3MjUxZTc5ODFlYjdiNTY3NmI1YjcyNzEwZDY4NWIwMmEwZmYyOTRm; st_data=201b39c5ad071d09e8f18c2fcd05e35f234674265d33247450ff7cfecf4e9192c43a14c3658623eef2e4ae8ab0e4a12e8830913217b537d2416ac6ccf3529b08c65dcbb6fe1f7a4ce99537e8ecd0b2ec251c2d920b8d0bd9a8dda470243be3a1; st_sign=a4a301f7',
    }

    def start_requests(self):
        for i in range(150,212):    #272   277   203  209
            num=i*50
            # url='https://tieba.baidu.com/f?kw=%E5%AD%99%E5%85%81%E7%8F%A0&ie=utf-8&pn=12850'
            # url = f'https://tieba.baidu.com/f?kw=%E5%AD%99%E5%85%81%E7%8F%A0&ie=utf-8&pn={num}'
            # url = f'https://tieba.baidu.com/f?kw=%E5%AD%99%E5%85%81%E7%8F%A0&ie=utf-8&tab=good&cid=&pn=12250'
            # url=f'https://tieba.baidu.com/f?kw=%E9%81%93%E6%99%96%E8%8A%9D&ie=utf-8&pn={num}'
            url=f'https://tieba.baidu.com/f?kw=%E9%81%93%E6%99%96%E8%8A%9D&ie=utf-8&tab=good&cid=0&pn={num}'
            yield self.make_requests_from_url(url)

    def make_requests_from_url(self, url):
        return Request(url,dont_filter=True,callback=self.parse,headers=self.header)
    def parse(self, response):
        selector=Selector(response=response)
        baidu=BaiduPage()
        print(response.url)
        # print(response.text)
        print("YES!!!!!!!!!")
        href=selector.xpath('/html').re('<a rel="noopener" href="(?P<href>.*?)" title=".*?" target="_blank" class="j_th_tit ">.*?</a>',re.S)
        title=selector.xpath('/html').re('<a rel="noopener" href=".*?" title="(?P<title>.*?)" target="_blank" class="j_th_tit ">.*?</a>',re.S)
        for r in range(0,len(title)):
            baidu['title']=title[r]
            baidu['link']=response.urljoin(href[r])
            print(title[r])
            print(response.urljoin(href[r]))
            time1 = time.localtime(time.time())
            baidu['nowtime'] = time.strftime('%Y-%m-%d %H:%M:%S', time1)
            yield baidu
        print(len(href))
        pass
